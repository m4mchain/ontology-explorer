CREATE TABLE IF NOT EXISTS `tbl_decode_input_abi` (
    `contract_hash` varchar(255) NOT NULL COMMENT '合约hash值',
    `abi` longtext COMMENT '合约abi',
    PRIMARY KEY (`contract_hash`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `tbl_contract_compile_info` (
 `contract_hash` VARCHAR ( 255 ) NOT NULL DEFAULT '' COMMENT '合约hash值',
 `description` text COMMENT '描述',
 `compiler_type` VARCHAR ( 255 ) DEFAULT '' COMMENT '编译器类型',
 `compiler_version` VARCHAR ( 255 ) DEFAULT '' COMMENT '编译器版本',
 `evm_version` VARCHAR ( 255 ) DEFAULT '' COMMENT '虚拟机类型',
 `license_type` VARCHAR ( 255 ) DEFAULT '' COMMENT 'license类型',
 `optimization` TINYINT ( 1 ) COMMENT '是有优化',
 `optimization_run` INT ( 11 ) COMMENT '优化步数',
 `constructor_argument` text COMMENT '构造参数',
 `contact_library` text COMMENT '合约库',
 `audit_flag` INT ( 2 ) NOT NULL DEFAULT '0' COMMENT '认证标识,0:未认证,1:认证通过,2:认证失败',
 `setting` VARCHAR ( 1000 ) DEFAULT '' COMMENT 'setting',
 `create_time` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
 `update_time` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '更新时间',
 PRIMARY KEY ( `contract_hash` ) USING BTREE
) ENGINE = INNODB DEFAULT CHARSET = utf8;

INSERT INTO `tbl_decode_input_abi` (`contract_hash`, `abi`) VALUES ('0100000000000000000000000000000000000000', '{\"hash\":\"0000000000000000000000000000000000000001\",\"functions\":[{\"name\":\"init\",\"parameters\":[],\"returntype\":\"Bool\"},{\"name\":\"transfer\",\"parameters\":[{\"name\":\"transfers\",\"type\":\"Struct\",\"subType\":[{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"Int\"}]}],\"returntype\":\"Bool\"},{\"name\":\"transferV2\",\"parameters\":[{\"name\":\"transfers\",\"type\":\"Struct\",\"subType\":[{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"Long\"}]}],\"returntype\":\"Bool\"},{\"name\":\"approve\",\"parameters\":[{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"Int\"}],\"returntype\":\"Bool\"},{\"name\":\"approveV2\",\"parameters\":[{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"Long\"}],\"returntype\":\"Bool\"},{\"name\":\"transferFrom\",\"parameters\":[{\"name\":\"sender\",\"type\":\"Address\"},{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"Int\"}],\"returntype\":\"Bool\"},{\"name\":\"transferFromV2\",\"parameters\":[{\"name\":\"sender\",\"type\":\"Address\"},{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"Long\"}],\"returntype\":\"Bool\"}]}');
INSERT INTO `tbl_decode_input_abi` (`contract_hash`, `abi`) VALUES ('0200000000000000000000000000000000000000', '{\"hash\":\"0000000000000000000000000000000000000002\",\"functions\":[{\"name\":\"init\",\"parameters\":[],\"returntype\":\"Bool\"},{\"name\":\"transfer\",\"parameters\":[{\"name\":\"transfers\",\"type\":\"Struct\",\"subType\":[{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"Long\"}]}],\"returntype\":\"Bool\"},{\"name\":\"transferV2\",\"parameters\":[{\"name\":\"transfers\",\"type\":\"Struct\",\"subType\":[{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"BigInt\"}]}],\"returntype\":\"Bool\"},{\"name\":\"approve\",\"parameters\":[{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"Long\"}],\"returntype\":\"Bool\"},{\"name\":\"approveV2\",\"parameters\":[{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"BigInt\"}],\"returntype\":\"Bool\"},{\"name\":\"transferFrom\",\"parameters\":[{\"name\":\"sender\",\"type\":\"Address\"},{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"Long\"}],\"returntype\":\"Bool\"},{\"name\":\"transferFromV2\",\"parameters\":[{\"name\":\"sender\",\"type\":\"Address\"},{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"BigInt\"}],\"returntype\":\"Bool\"}]}');
INSERT INTO `tbl_decode_input_abi` (`contract_hash`, `abi`) VALUES ('0300000000000000000000000000000000000000', '{\"hash\":\"0000000000000000000000000000000000000003\",\"functions\":[{\"name\":\"regIDWithPublicKey\",\"parameters\":[{\"name\":\"ont id\",\"type\":\"String\"},{\"name\":\"pubKey\",\"type\":\"ByteArray\"}],\"returntype\":\"Bool\"},{\"name\":\"revokeID\",\"parameters\":[{\"name\":\"ont id\",\"type\":\"String\"},{\"name\":\"index\",\"type\":\"Int\"}],\"returntype\":\"Bool\"}]}');
INSERT INTO `tbl_decode_input_abi` (`contract_hash`, `abi`) VALUES ('0700000000000000000000000000000000000000', '{\"hash\":\"0000000000000000000000000000000000000007\",\"functions\":[{\"name\":\"registerCandidate\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"},{\"name\":\"account\",\"type\":\"Address\"},{\"name\":\"initPos\",\"type\":\"Long\"},{\"name\":\"ontId\",\"type\":\"String\"},{\"name\":\"keyNo\",\"type\":\"Long\"}],\"returntype\":\"Bool\"},{\"name\":\"unRegisterCandidate\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"},{\"name\":\"account\",\"type\":\"Address\"}],\"returntype\":\"Bool\"},{\"name\":\"withdrawOng\",\"parameters\":[{\"name\":\"account\",\"type\":\"Address\"}],\"returntype\":\"Bool\"},{\"name\":\"withdrawFee\",\"parameters\":[{\"name\":\"account\",\"type\":\"Address\"}],\"returntype\":\"Bool\"},{\"name\":\"approveCandidate\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"}],\"returntype\":\"Bool\"},{\"name\":\"rejectCandidate\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"}],\"returntype\":\"Bool\"},{\"name\":\"authorizeForPeer\",\"parameters\":[{\"name\":\"account\",\"type\":\"Address\"},{\"name\":\"peerPubkeyLength\",\"type\":\"Int\"},{\"name\":\"peerPubkey\",\"type\":\"String[]\",\"subType\":{\"name\":\"peerPubkey\",\"type\":\"String\"}},{\"name\":\"posListLength\",\"type\":\"Int\"},{\"name\":\"posList\",\"type\":\"Long[]\",\"subType\":{\"name\":\"pos\",\"type\":\"Long\"}}],\"returntype\":\"Bool\"},{\"name\":\"unAuthorizeForPeer\",\"parameters\":[{\"name\":\"account\",\"type\":\"Address\"},{\"name\":\"peerPubkeyLength\",\"type\":\"Int\"},{\"name\":\"peerPubkey\",\"type\":\"String[]\",\"subType\":{\"name\":\"peerPubkey\",\"type\":\"String\"}},{\"name\":\"posListLength\",\"type\":\"Int\"},{\"name\":\"posList\",\"type\":\"Long[]\",\"subType\":{\"name\":\"pos\",\"type\":\"Long\"}}],\"returntype\":\"Bool\"},{\"name\":\"withdraw\",\"parameters\":[{\"name\":\"account\",\"type\":\"Address\"},{\"name\":\"peerPubkeyLength\",\"type\":\"Int\"},{\"name\":\"peerPubkey\",\"type\":\"String[]\",\"subType\":{\"name\":\"peerPubkey\",\"type\":\"String\"}},{\"name\":\"withdrawListLength\",\"type\":\"Int\"},{\"name\":\"withdrawList\",\"type\":\"Long[]\",\"subType\":{\"name\":\"pos\",\"type\":\"Long\"}}],\"returntype\":\"Bool\"},{\"name\":\"commitDpos\",\"parameters\":[],\"returntype\":\"Bool\"},{\"name\":\"blackNode\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"}],\"returntype\":\"Bool\"},{\"name\":\"whiteNode\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"}],\"returntype\":\"Bool\"},{\"name\":\"quitNode\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"},{\"name\":\"account\",\"type\":\"Address\"}],\"returntype\":\"Bool\"},{\"name\":\"changeMaxAuthorization\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"},{\"name\":\"account\",\"type\":\"Address\"},{\"name\":\"maxAuthorize\",\"type\":\"Int\"}],\"returntype\":\"Bool\"},{\"name\":\"addInitPos\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"},{\"name\":\"account\",\"type\":\"Address\"},{\"name\":\"pos\",\"type\":\"Int\"}],\"returntype\":\"Bool\"},{\"name\":\"reduceInitPos\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"},{\"name\":\"account\",\"type\":\"Address\"},{\"name\":\"pos\",\"type\":\"Int\"}],\"returntype\":\"Bool\"},{\"name\":\"setPeerCost\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"},{\"name\":\"account\",\"type\":\"Address\"},{\"name\":\"peerCost\",\"type\":\"Int\"}],\"returntype\":\"Bool\"},{\"name\":\"setFeePercentage\",\"parameters\":[{\"name\":\"peerPubkey\",\"type\":\"String\"},{\"name\":\"account\",\"type\":\"Address\"},{\"name\":\"peerCost\",\"type\":\"Int\"},{\"name\":\"stakeCost\",\"type\":\"Int\"}],\"returntype\":\"Bool\"},{\"name\":\"callSplit\",\"parameters\":[],\"returntype\":\"Bool\"}]}');
INSERT INTO `tbl_decode_input_abi` (`contract_hash`, `abi`) VALUES ('neovm', '{\"functions\":[{\"name\":\"transfer\",\"parameters\":[{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"amount\",\"type\":\"BigInt\"}],\"returntype\":\"Boolean\"},{\"name\":\"approve\",\"parameters\":[{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"BigInt\"}],\"returntype\":\"Bool\"},{\"name\":\"transferFrom\",\"parameters\":[{\"name\":\"sender\",\"type\":\"Address\"},{\"name\":\"from\",\"type\":\"Address\"},{\"name\":\"to\",\"type\":\"Address\"},{\"name\":\"value\",\"type\":\"BigInt\"}],\"returntype\":\"Bool\"}]}');

ALTER TABLE `tbl_contract` MODIFY COLUMN `abi` mediumtext NOT NULL COMMENT '合约abi';
ALTER TABLE `tbl_contract` MODIFY COLUMN `code` mediumtext NOT NULL COMMENT '合约code';
ALTER TABLE `tbl_contract` ADD COLUMN `create_tx_hash` VARCHAR(100) DEFAULT '' COMMENT '合约创建交易' AFTER `contract_hash`;
